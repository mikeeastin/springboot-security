package com.mrc.controller;import com.mrc.service.FileResolve;import org.apache.log4j.Logger;import org.hibernate.validator.constraints.NotBlank;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.*;import org.springframework.web.multipart.MultipartFile;import javax.validation.Valid;import javax.validation.constraints.NotNull;import java.io.*;import java.util.Scanner;/** * Created by Administrator on 2017-06-12. */@Controllerpublic class FileUploadController {    Logger logger = Logger.getLogger(FileUploadController.class);    @Autowired    private FileResolve fileResolve;    @GetMapping(value = "/index")    public String index() {        return "index";    }    @PostMapping(value = "/fileUpload")    @ResponseBody    public String fileUpload(@RequestPart("file") @Valid @NotNull @NotBlank MultipartFile file) {        if (!file.isEmpty()) {            try {                BufferedReader reader = new BufferedReader(new InputStreamReader(new BufferedInputStream(file.getInputStream())));                Scanner sc = new Scanner(reader);                StringBuffer stringBuffer = new StringBuffer();                while (sc.hasNext()) {                    stringBuffer.append(sc.nextLine());                }                fileResolve.resolve(stringBuffer);            } catch (FileNotFoundException e) {                e.printStackTrace();                return "上传失败," + e.getMessage();            } catch (IOException e) {                e.printStackTrace();                return "上传失败," + e.getMessage();            } catch (Exception e) {                e.printStackTrace();                return "{" +                        "   \"name\":" + "\"分析完毕，请处理： " + e.getMessage() + "\"" +                        "}";            }            return "{" +                    "   \"name\":" + "\" 日志没有发现异常，请确认是否配置了重定向以及info级别，点击<a href='xxx.html'>查看详情</a> \"" +                    "}";        } else {            return "上传失败，因为文件是空的.";        }    }}